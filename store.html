<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda - DIGITAL FACTORY</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .product-card {
            margin: 15px;
        }
        .navbar {
            background: linear-gradient(to right, #00c9ff, #92fe9d); 
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        .custom-footer {
            background: linear-gradient(to right, #00c9ff, #92fe9d);
            color: rgb(125, 207, 203);
            width: 100%;
            text-align: center;
            padding: 10px 0;
        }
        .chatbot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            border: 1px solid #ccc;
            border-radius: 5px;
            display: none; /* Oculto por defecto */
            z-index: 1000;
            background-color: white;
        }
        .chatbot-header {
            background-color: #00c9ff;
            color: white;
            padding: 10px;
            text-align: center;
            border-top-left-radius: 5px;
            border-top-right-radius: 5px;
        }
        .chatbot-body {
            height: 300px;
            overflow-y: auto;
            padding: 10px;
        }
        .chatbot-footer {
            display: flex;
            padding: 10px;
        }
        .message {
            margin: 5px 0;
        }
        .user-message {
            text-align: right;
            color: blue;
        }
        .bot-message {
            text-align: left;
            color: green;
        }
    </style>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">DIGITAL FACTORY</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="PaginaSg.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="store.html">Tienda</a>
                    </li>
                    <li class="nav-item dropdown"></li>
                        <a class="nav-link dropdown-toggle" href="#" id="servicesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Servicios
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="servicesDropdown">
                            <li><a class="dropdown-item" href="servicio1.html">Desarrollo Website</a></li>
                            <li><a class="dropdown-item" href="servicio2.html">Servicio T√©cnico</a></li>
                            <li><a class="dropdown-item" href="servicio3.html">Productos</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="register.html">Crear Cuenta</a>
                    </li>
                </ul>
                <div class="nav-item">
                    <a class="btn nav-link" href="carrito.html">üõí Carrito (<span id="cart-count">0</span>)</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Productos -->
    <div class="container mt-5 pt-5">
        <h2>Productos en Venta</h2>
        <div class="row" id="product-list">
            <!-- Listado de productos -->
            <!-- Ejemplo de producto -->
            <div class="col-md-4 product-card">
                <div class="card">
                    <img src="Media/pc.webp" class="card-img-top" alt="Computadora de escritorio">
                    <div class="card-body">
                        <h5 class="card-title">Computadora de Escritorio</h5>
                        <p class="card-text">Precio: Q1500</p>
                        <p class="card-text">Cantidad disponible: <span id="qty-computadora">5</span></p>
                        <button class="btn btn-primary" onclick="addToCart('Computadora de Escritorio', 1500, 'qty-computadora')">Agregar al Carrito</button>
                    </div>
                </div>
            </div>

          <!-- Producto 2 -->
        <div class="col-md-4 product-card">
            <div class="card">
                <img src="Media/laptop.jpeg" class="card-img-top" alt="Laptop">
                <div class="card-body">
                    <h5 class="card-title">Laptop</h5>
                    <p class="card-text">Precio: Q2000</p>
                    <p class="card-text">Cantidad disponible: <span id="qty-laptop">3</span></p>
                    <button class="btn btn-primary" onclick="addToCart('Laptop', 2000, 'qty-laptop')">Agregar al Carrito</button>
                </div>
            </div>
        </div>

        <!-- Producto 3 -->
        <div class="col-md-4 product-card">
            <div class="card">
                <img src="Media/monitor.webp" class="card-img-top" alt="Monitor">
                <div class="card-body">
                    <h5 class="card-title">Monitor 24"</h5>
                    <p class="card-text">Precio: Q800</p>
                    <p class="card-text">Cantidad disponible: <span id="qty-monitor">4</span></p>
                    <button class="btn btn-primary" onclick="addToCart('Monitor 24"', 800, 'qty-monitor')">Agregar al Carrito</button>
                </div>
            </div>
        </div>

        <!-- Producto 4 -->
        <div class="col-md-4 product-card">
            <div class="card">
                <img src="Media/teclado.jpg" class="card-img-top" alt="Teclado">
                <div class="card-body">
                    <h5 class="card-title">Teclado Mec√°nico</h5>
                    <p class="card-text">Precio: Q300</p>
                    <p class="card-text">Cantidad disponible: <span id="qty-teclado">10</span></p>
                    <button class="btn btn-primary" onclick="addToCart('Teclado Mec√°nico', 300, 'qty-teclado')">Agregar al Carrito</button>
                </div>
            </div>
        </div>

        <!-- Producto 5 -->
        <div class="col-md-4 product-card">
            <div class="card">
                <img src="Media/mouses.jpeg" class="card-img-top" alt="Rat√≥n">
                <div class="card-body">
                    <h5 class="card-title">Rat√≥n Inal√°mbrico</h5>
                    <p class="card-text">Precio: Q150</p>
                    <p class="card-text">Cantidad disponible: <span id="qty-raton">7</span></p>
                    <button class="btn btn-primary" onclick="addToCart('Rat√≥n Inal√°mbrico', 150, 'qty-raton')">Agregar al Carrito</button>
                </div>
            </div>
        </div>

        <!-- Producto 6 -->
        <div class="col-md-4 product-card">
            <div class="card">
                <img src="Media/sillas-gaming.jpg" class="card-img-top" alt="Silla Gamer">
                <div class="card-body">
                    <h5 class="card-title">Silla Gamer</h5>
                    <p class="card-text">Precio: Q1200</p>
                    <p class="card-text">Cantidad disponible: <span id="qty-silla">5</span></p>
                    <button class="btn btn-primary" onclick="addToCart('Silla Gamer', 1200, 'qty-silla')">Agregar al Carrito</button>
                </div>
            </div>
        </div>

        <!-- Producto 7 -->
        <div class="col-md-4 product-card">
            <div class="card">
                <img src="Media/impresora.jpeg" class="card-img-top" alt="Impresora">
                <div class="card-body">
                    <h5 class="card-title">Impresora Multifuncional</h5>
                    <p class="card-text">Precio: Q900</p>
                    <p class="card-text">Cantidad disponible: <span id="qty-impresora">2</span></p>
                    <button class="btn btn-primary" onclick="addToCart('Impresora Multifuncional', 900, 'qty-impresora')">Agregar al Carrito</button>
                </div>
            </div>
        </div>

        <!-- Producto 8 -->
        <div class="col-md-4 product-card">
            <div class="card">
                <img src="Media/audifono.jpeg" class="card-img-top" alt="Altavoces">
                <div class="card-body">
                    <h5 class="card-title">Altavoces Bluetooth</h5>
                    <p class="card-text">Precio: Q400</p>
                    <p class="card-text">Cantidad disponible: <span id="qty-altavoces">6</span></p>
                    <button class="btn btn-primary" onclick="addToCart('Altavoces Bluetooth', 400, 'qty-altavoces')">Agregar al Carrito</button>
                </div>
            </div>
        </div>

        <!-- Producto 9 -->
        <div class="col-md-4 product-card">
            <div class="card">
                <img src="Media/ssd.jpeg" class="card-img-top" alt="SSD">
                <div class="card-body">
                    <h5 class="card-title">Disco Duro SSD 1TB</h5>
                    <p class="card-text">Precio: Q1000</p>
                    <p class="card-text">Cantidad disponible: <span id="qty-ssd">8</span></p>
                    <button class="btn btn-primary" onclick="addToCart('Disco Duro SSD 1TB', 1000, 'qty-ssd')">Agregar al Carrito</button>
                </div>
            </div>
        </div>

        <!-- Producto 10 -->
        <div class="col-md-4 product-card">
            <div class="card">
                <img src="Media/webcam.jpeg" class="card-img-top" alt="C√°mara Web">
                <div class="card-body">
                    <h5 class="card-title">C√°mara Web HD</h5>
                    <p class="card-text">Precio: Q500</p>
                    <p class="card-text">Cantidad disponible: <span id="qty-camara">4</span></p>
                    <button class="btn btn-primary" onclick="addToCart('C√°mara Web HD', 500, 'qty-camara')">Agregar al Carrito</button>
                </div>
            </div>
        </div>

            </div>
        </div>


      

    <!-- Modal del Carrito -->
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="cartModalLabel">Carrito de Compras</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul id="modal-cart-items"></ul>
                    <strong>Total: Q. <span id="modal-total-price">0.00</span></strong>
                    <div class="mt-3">
                        <button class="btn btn-success" onclick="showCheckoutForm()">Continuar con la Compra</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Formulario de Checkout -->
    <div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="checkoutModalLabel">Formulario de Compra</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="checkout-form">
                        <div class="mb-3">
                            <label for="address" class="form-label">Direcci√≥n de Env√≠o</label>
                            <input type="text" class="form-control" id="address" required>
                        </div>
                        <div class="mb-3">
                            <label for="payment" class="form-label">Forma de Pago</label>
                            <select class="form-select" id="payment" onchange="toggleCardFields()" required>
                                <option value="">Seleccione...</option>
                                <option value="tarjeta">Tarjeta de Cr√©dito</option>
                                <option value="efectivo">Efectivo</option>
                            </select>
                        </div>
                        <div id="card-fields" style="display: none;">
                            <div class="mb-3">
                                <label for="card-number" class="form-label">N√∫mero de Tarjeta</label>
                                <input type="text" class="form-control" id="card-number" required>
                            </div>
                            <div class="mb-3">
                                <label for="card-expiry" class="form-label">Fecha de Expiraci√≥n (MM/AA)</label>
                                <input type="text" class="form-control" id="card-expiry" placeholder="MM/AA" required>
                            </div>
                            <div class="mb-3">
                                <label for="card-cvc" class="form-label">CVC</label>
                                <input type="text" class="form-control" id="card-cvc" required>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                    <button type="button" class="btn btn-primary" onclick="submitCheckout()">Continuar</button>
                </div>
            </div>
        </div>
    </div>

   <!-- Footer -->
   <footer class="custom-footer">
    <div class="container">
        <section class="mb-1">
            <a class="btn text-white btn-floating m-1" role="button" href="https://www.facebook.com" target="_blank">üåê Facebook</a>
            <a class="btn text-white btn-floating m-1" role="button" href="https://www.twitter.com" target="_blank">üê¶ Twitter</a>
            <a class="btn text-white btn-floating m-1" role="button" href="https://www.instagram.com" target="_blank">üì∏ Instagram</a>
            <a class="btn text-white btn-floating m-1" role="button" href="https://www.linkedin.com" target="_blank">üîó LinkedIn</a>
        </section>
        <section class="mb-1">
            <p>Derechos Reservados ¬© DIGITAL FACTORY</p>
        </section>
    </div>
</footer>


    <!-- Ventana del Chatbot -->
    <div id="chatbot" class="chatbot" aria-labelledby="chatbot-header" style="display: none;">
        <div class="chatbot-header" id="chatbot-header">
            Chatbot
            <button onclick="minimizeChat()" style="float: right; background: none; border: none; color: white;">-</button>
        </div>
        <div class="chatbot-body" id="chatbotBody">
            <!-- Mensajes del chatbot aparecer√°n aqu√≠ -->
        </div>
        <div class="chatbot-footer">
            <input type="text" id="userInput" placeholder="Escribe un mensaje..." aria-label="Mensaje del usuario">
            <button onclick="sendMessage()">Enviar</button>
        </div>
    </div>

    <button id="openChat" class="btn btn-primary" onclick="toggleChat()" style="position: fixed; bottom: 80px; right: 20px;">Chat</button>

    <script>
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        document.getElementById('cart-count').textContent = cart.length;

        function addToCart(name, price, qtyId) {
            const quantityAvailable = parseInt(document.getElementById(qtyId).textContent);
            const existingItem = cart.find(item => item.name === name);

            if (existingItem) {
                existingItem.quantity += 1;
                if (existingItem.quantity > quantityAvailable) {
                    alert('No hay suficiente stock disponible.');
                    existingItem.quantity -= 1; // revertir la cantidad si no hay stock
                    return;
                }
            } else {
                if (quantityAvailable <= 0) {
                    alert('No hay suficiente stock disponible.');
                    return;
                }
                cart.push({ name, price, quantity: 1 });
            }

            document.getElementById(qtyId).textContent = quantityAvailable - 1;
            localStorage.setItem('cart', JSON.stringify(cart));
            document.getElementById('cart-count').textContent = cart.length;

            showCartModal();
        }

        function showCartModal() {
            const modalCartItems = document.getElementById('modal-cart-items');
            const modalTotalPrice = document.getElementById('modal-total-price');
            modalCartItems.innerHTML = ''; // Limpiar el modal antes de llenarlo
            let totalPrice = 0;

            cart.forEach(item => {
                const listItem = document.createElement('li');
                listItem.textContent = `${item.name} - Q. ${item.price} x ${item.quantity}`;
                modalCartItems.appendChild(listItem);
                totalPrice += item.price * item.quantity;
            });

            modalTotalPrice.textContent = totalPrice.toFixed(2);
            const cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
            cartModal.show();
        }

        function toggleCardFields() {
            const cardFields = document.getElementById('card-fields');
            cardFields.style.display = document.getElementById('payment').value === 'tarjeta' ? 'block' : 'none';
        }

        function submitCheckout() {
            const address = document.getElementById('address').value;
            const paymentMethod = document.getElementById('payment').value;

            if (!address || (paymentMethod === 'tarjeta' && (!document.getElementById('card-number').value || !document.getElementById('card-expiry').value || !document.getElementById('card-cvc').value))) {
                alert('Por favor completa todos los campos requeridos.');
                return;
            }

            alert('Compra realizada con √©xito. ¬°Gracias por su compra!');
            localStorage.removeItem('cart'); // Limpiar el carrito
            cart = [];
            document.getElementById('cart-count').textContent = cart.length;
            const checkoutModal = bootstrap.Modal.getInstance(document.getElementById('checkoutModal'));
            checkoutModal.hide();
        }

        function toggleChat() {
            const chatbot = document.getElementById('chatbot');
            chatbot.style.display = chatbot.style.display === 'none' ? 'block' : 'none';
        }

        function minimizeChat() {
            const chatbotBody = document.getElementById('chatbotBody');
            const chatbotFooter = document.querySelector('.chatbot-footer');
            if (chatbotBody.style.display === 'none') {
                chatbotBody.style.display = 'block';
                chatbotFooter.style.display = 'flex';
            } else {
                chatbotBody.style.display = 'none';
                chatbotFooter.style.display = 'none';
            }
        }

        function sendMessage() {
            const userInput = document.getElementById('userInput');
            const message = userInput.value;

            if (message.trim() === '') return;

            addMessage('Usuario: ' + message, 'user-message');

            setTimeout(() => {
                const botResponse = getBotResponse(message);
                addMessage('Bot: ' + botResponse, 'bot-message');
            }, 500);

            userInput.value = '';
        }

        function addMessage(message, className) {
            const chatbotBody = document.getElementById('chatbotBody');
            const messageElement = document.createElement('div');
            messageElement.className = 'message ' + className;
            messageElement.textContent = message;
            chatbotBody.appendChild(messageElement);
            chatbotBody.scrollTop = chatbotBody.scrollHeight;
        }

        function getBotResponse(userMessage) {
            const lowerCaseMessage = userMessage.toLowerCase();
            if (lowerCaseMessage.includes('hola')) {
                return '¬°Hola! ¬øC√≥mo puedo ayudarte hoy?';
            } else if (lowerCaseMessage.includes('servicios')) {
                return 'Ofrecemos desarrollo web, servicio t√©cnico y productos tecnol√≥gicos. ¬øTe gustar√≠a saber m√°s sobre alguno?';
            } else {
                return 'Lo siento, no entiendo tu mensaje. Pero estoy aqu√≠ para ayudarte. ¬øPuedes reformularlo?';
            }
        }
    </script>



    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>